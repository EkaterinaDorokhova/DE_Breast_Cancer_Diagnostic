# -*- coding: utf-8 -*-
"""save_results.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1Ry5tE8ZQrR5vnem5mO_m4hXvls8-j8kH
"""

import os
import shutil
import argparse
import logging

def save_artifacts(source_dir, output_dir):
    os.makedirs(output_dir, exist_ok=True)

    files_to_copy = [
        "model.pkl",
        "metrics.json",
        "eda_report.txt",
        "X_processed.csv",
        "y.csv"
    ]

    for filename in files_to_copy:
        src = os.path.join(source_dir, filename)
        dst = os.path.join(output_dir, filename)

        if os.path.exists(src):
            shutil.copy(src, dst)
            logging.info(f"Файл скопирован: {src} → {dst}")
        else:
            logging.warning(f"Файл не найден и не будет скопирован: {src}")

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Финальное сохранение артефактов пайплайна")
    parser.add_argument("--source", default="results", help="Папка с результатами предыдущих шагов")
    parser.add_argument("--output", default="results/final", help="Папка для финальной выгрузки")

    args = parser.parse_args()
    logging.basicConfig(level=logging.INFO)

    save_artifacts(args.source, args.output)